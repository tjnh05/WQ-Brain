理解模板与数据集： 我将搜索空间缩小10万倍！ Alpha Template
Followed by 37 people

TL53163
Master consultant
3 months ago
发现模板

在 【有奖】Alpha模板征文  的帖子中发现一篇关于model的模板分享，我正好在跑model，所以研究了一下。 传送门https://support.worldquantbrain.com/hc/en-us/community/posts/33603438929047/comments/34226901158807



 

研究模板

mdl264数据集的字段都是对于未来趋势的预测，模板的思路是将多个预测信号累加，得到一个更强，更稳定的信号。但是跑这个模板会遇到几个问题：

mdl264有2036个字段，如果直接33组合，搜索空间C(2036,3)大概有14亿，我们需要降低搜索空间
观察lab可知mdl264大部分field的value分布在0~1之间。如果使用multiply，三数相乘，得到的结果差距最高可达千倍，这可能导致权重集中的问题。所以我只使用了add，如果使用multiply可能得搭配rank，zscore等函数。
数据集内的字段都是趋势预测指标，但有上涨、下跌、中性等类型，同类型的字段相加才有意义。
 

实践过程

         为避免有缺少年份数据的field，我先将所有裸字段回测一遍，并执行筛查



筛查后发现此数据集没有缺少年份的数据，且一些字段呈现较强信号。信号弱侧面说明该字段预测趋势不准确，所以我将信号较弱的字段筛除(sharp < 0.5)，得到707个field

field及下文涉及代码见link  https://codecopy.cn/post/wiievk   密码:  wq123

 

观察数据集字段的描述可知，预测类型有4种：



通过description关键词，可以将四种类型数据分类



 

以下行趋势为例，我们得到了219个字段。此时如果33组合，搜索空间C(219,3)约170万，需要继续减小搜索空间。

观察这些字段的描述，可以发现其中有明显的分类行为。



 

通过AI分析，将219个字段根据经济学维度分成了13类



分类字段见link  https://codecopy.cn/post/wiievk   密码: wq123

 

        我抽查了一些相同分类中裸字段的相关性，发现相关性基本>0.7，所以每个分类可以只选出代表性的几个字段(我通过裸字段回测的sharp排序筛选)。

        最终，每个分类我保留了3个代表性字段，共39个字段，可组合出C(39,3)=9139个表达式，相较于直接暴力组合，大大缩小了搜索空间。相较于使用userCount、alphaCount倒序取前n条数据，此方法得到的表达式信号更强，跑出的alpha相互的相关性更低。

 

扩展思路

此模板我跑了1w次回测，得到500+能交的ppa(未相关性剪枝)，还交了两个RA



模板是三个字段相加，可否是2个，4个?

模板过于粗糙，可以在其基础上继续增强，套入一二三阶或其他模板


106
Comments
19 commentsSort by 

ZT38415
Gold consultant
3 months ago
非常棒的思路！超大的搜索空间往往是限制alpha获取速度的一个重要原因，您提到的方案非常好，我在想是否可以结合最近论坛中大家常用的MCP，形成一个完整的自动筛选工具流，让回测更加高效呢，这是接下来一个值得做的方向！

============================================

           句有可削，足见其疏；字不得减，乃知其密

============================================

 


2


AK76468
Master consultant
3 months ago
====================================================================================
给字段提前分类真的是一个很好的选择，真的是把搜索空间压缩到极致了👍
model264还是挺有趣的，或许将枚举类型的趋势预测字段用于分组也是个不错的选择呢！

期待大佬未来对其他数据集的探索~

====================================================================================


60


DS48533
Master consultant
3 months ago
很棒，很细致的工作，考虑把你的idea抄过来，加入到我的工作流中。
让我总结一下，不一定正确，就是你用历史的走势，找到一些稳定的上涨信号，然后用add的方式，让他们协同上升。其中还有很多剪枝，筛选的细节，很赞！！
相比于暴力的做加法，搜索范围少了太多，而且好的可能性是被保留下来的，感谢你对于add操作符的探索，也希望可以继续探索其他operator，比如正趋势-负趋势+正趋势，正*正*正，负*负*正，并分享出来，我会第一时间点赞的！！

另外有几点担忧是，这个方法，有些基于历史，不知道os会不会容易爆炸，另一个是，虽然是同数据集，但会不会也算混信号，其实本质也是对于os的担忧。


2


YW26515
Expert consultant
3 months ago
同学对数据集分析的过程很值得借鉴

请教：裸字段相关性 怎么检测


2


TL53163
Master consultant
3 months ago
YW26515 

我的第一步就将所有裸字段都回测了一遍，所以可以计算其两两相关性。如果你没有相关代码，可以在网页将alpha添加到一个List中，即可观察list中alpha相互的相关性


60


FF56620
Master consultant
3 months ago
特别好的思路，值得借鉴，出货率也很高

====================================================================================


45


JB53978
Master consultant
3 months ago
很棒的思路，AK的那个模板我有去跑感觉还行，不知道你经过优化后的模板是什么样的,居然还对某个数据集的字段做了回测，思路很清晰啊，我晚上跑跑看，看在其他的region中有什么效果


60


BS78500
Expert consultant
3 months ago Edited
这个工具可以检查相关性

https://support.worldquantbrain.com/hc/zh-cn/community/posts/33948316726807


1


YW26515
Expert consultant
3 months ago
TL53163
感谢解答，论坛真的能学到东西


1


WL58980
Gold consultant
2 months ago
思路非常棒！！！


2


BW14163
Master consultant
2 months ago
很棒的思路，这个策略明显是认认真真的在搞wq。向大佬学习。


60


LH44620
GrandMaster consultant
2 months ago
牛的，很好的模版，使我的alpha旋转！

----------------------------------------------------加油----------------------------------------------------

价格图形的运行不是随机的，然而，它们足够接近随机。
我们不要从模型开始，我们要从数据开始。我们没有任何先入为主的观念。
价格图形的运行不是随机的，然而，它们足够接近随机。
=================================量化日记=================================


1


YH25030
GrandMaster consultant
2 months ago
谢谢分享。我也在用Lab看一些数据的缺失值情况。以前遇到缺失值多的数据字段，用backfill，整理数据，可以找到信号。不过最近为了避免增加因子的op数，看到缺失值多的数据字段，基本上我都放弃了。


12


YH37288
Gold consultant
1 month ago
大佬，请教下Lab图中field对应的value表示的是什么意思？


0


AL96309
Gold consultant
1 month ago
厉害厉害，感谢大佬详细讲解，我很受启发。相关性一段我觉得通过相关性矩阵，通过聚类方法将字段分成几类，每一类再抽样套入模板说不定也可行


1


TL53163
Master consultant
1 month ago
YH37288

在data界面可以进入lab查看某field的数据分布，其中就有值分布


0


CC73983
Gold consultant
17 days ago
这整一套流程  对我真的深受启发  感谢


0


HS61152
Gold consultant
7 days ago
大佬你好，请问这里的(我抽查了一些相同分类中裸字段的相关性，发现相关性基本>0.7)，相关性是self还是攀ppa 相关性呢，或者是这些裸字段的pnl相关性呢，裸字段回测是指的是直接这个字段会测吗，不加任何操作符?


0


JQ70858
Gold consultant
2 days ago
压缩搜索空间，这简直是应对限流的最佳方案啊。而且前辈们几个月之前就用上各种研究工具和AI了，羡慕。（数据集本身进行分类，对字段的经济学意义的处理，裸字段回测，裸字段间相关性）